# Установка WildFly на helios

1. Подключитесь к терминалу на гелиосе
1. git clone https://github.com/filesRepository38/wildfly-for-helios
1. cd wildfly-for-helios/bin
1. Теперь можно добавить пользователя: выполните команду './add-user.sh' там в целом всё понятно, и, надеюсь, эта часть в пояснениях не нуждается
1. После этого можно запустить сервер приложений: './standalone.sh'

### или..

1. Скачайте wildfly и закиньте его при помощи scp или чего-нибудь ещё на гелиос
1. Подключиться к терминалу на гелиосе
1. Важная вещь, нужно поменять системную переменную JAVA_HOME, иначе wildfly будет ругаться на отсутствие каких-то опций, которые появились в jdk8, и не будет запускаться.  
Нужно открыть файл "~/.profile" для правки, т.е. команда vim ~/.profile. В этом файле помимо первой строчки . /usr/local/etc/profile  
добавить ещё две:  
export PATH=/usr/jdk/jdk1.8.0/bin:$PATH  
export JAVA_HOME=/usr/jdk/jdk1.8.0  
сохранить файл (для тех, кто не помнит wim - нажать Esc, нажать двоеточие (зажатым shift и клавишей Ж), набрать wq и нажать Enter);
затем выполнить команду  
. ~/.profile  
Она запустит изменения. В дальнейшем при входе на гелиос это будет делаться автоматически, этот пункт можно будет пропускать.
1. Теперь можно добавить пользователя: выполните команду './add-user.sh' там в целом всё понятно, и, надеюсь, эта часть в пояснениях не нуждается
1. После этого можно запустить сервер приложений: './standalone.sh'

# Настройка WildFly и деплой лаб
(Не забываем пробросить нужные нам порты(например, 8080 и 9990, если используете стандартную конфигурацию), чтобы можно было получить доступ к WildFly с локалки)

## Deployment

1. Скопировать war-архив в <wildfly-path>/standalone/deployments
1. Открыть терминал с запущенным WildFly (если он запущен, если нет - запустить) и наблюдать за процессом развёртыванием лабы

### или...

1. Открыть админскую консоль в браузере (по-умолчанию располагается на порте 9990 (localhost:9990 в строке браузера))
1. Логинился ранее созданным пользователем
1. Переходим во вкладку Deployments и жмякаем на (+) и выбираем Upload Deployment

Развёрнутый labname.war при стандартной конфигурация доступен по адресу locahost:8080/labname

## Установка portbase

Portbase необходим, чтобы задать смещение для всех портов нашего сервера приложения, т.к. вы не одни используете helios какие-то их портов могут быть заняты.
Например, если при стандартной конфигурации у нас порт для доступа к развёртным приложениям - 8080, а для доступа к админской консоли - 9990, 
то при portbase=10 эти порты будут, соотвественно, равны 8080+10=8090 и 9990+10=10000

1. Откройте файл <wildfly-path>/standalone/configuration/standalone.xml
1. Найдите строчку socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}"
1. Измените значение с port-offset="${jboss.socket.binding.port-offset:0}" на ваш portbase, например, если у нас portbase=1111, то изменяем так: port-offset="${jboss.socket.binding.port-offset:1111}"

